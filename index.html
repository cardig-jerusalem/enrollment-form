<!doctype html>
<html lang="en">
<head>
</head>
<body>
<link rel="stylesheet" href="styles.css">
  <div class="app-container">
    
    <!-- Top Brand Header -->
    <header class="top-header">
      <div class="brand-logo-container">
        <img id="logoPreview" src="" alt="CARDIG Logo">
      </div>
      <div class="brand-text">
        <h1>OFFICIAL ENROLLMENT FORM</h1>
        <p>Cardiology Interest Group of Jerusalem (CARDIG-Jerusalem)</p>
      </div>
    </header>

    <!-- LEFT COLUMN: Forms -->
    <main class="main-content">
      
      <!-- Section 1: General Info -->
      <section class="section-card">
        <h3 class="section-title">Primary Information</h3>
        
        <div class="grid-2">
          <div class="form-group">
            <label>Activity Name</label>
            <input id="activityName" type="text" placeholder="e.g. ECG Workshop 101">
          </div>
          <div class="form-group">
            <label>Division</label>
            <select id="division">
              <option value="">— Select Division —</option>
              <option>Education</option>
              <option>Research</option>
              <option>Skills</option>
              <option>Journal Club</option>
              <option>Guidelines</option>
              <option>Custom</option>
            </select>
            <!-- Custom input injected here by JS -->
          </div>
        </div>

        <div class="grid-2">
          <div class="form-group">
            <label>Coordinator Full Name</label>
            <input id="coordinatorName" type="text">
          </div>
          <div class="form-group">
            <label>Position</label>
            <input id="coordinatorPosition" type="text">
          </div>
        </div>

        <div class="grid-2">
          <div class="form-group">
            <label>Is this a sub-activity?</label>
            <select id="isSubActivity">
              <option value="">— Choose —</option>
              <option value="no">No</option>
              <option value="yes">Yes</option>
            </select>
          </div>
          <div class="form-group">
            <label>If yes, Primary Activity Name</label>
            <input id="primaryActivityName" type="text" placeholder="Parent activity name">
          </div>
        </div>
      </section>

      <!-- Section 2: Logistics -->
      <section class="section-card">
        <h3 class="section-title">Logistics and Target</h3>
        
        <div class="grid-3">
          <div class="form-group"><label>Date</label><input id="actDate" type="date"></div>
          <div class="form-group"><label>Time From</label><input id="timeFrom" type="time"></div>
          <div class="form-group"><label>Time To</label><input id="timeTo" type="time"></div>
        </div>

        <div class="grid-3">
          <div class="form-group"><label>Place/Platform</label><input id="place" type="text" placeholder="e.g. Zoom / Hall A"></div>
          <div class="form-group"><label>Target Group</label><input id="targetGroup" type="text"></div>
          <div class="form-group"><label>Expected Participants</label><input id="expectedNum" type="number" min="0"></div>
        </div>

        <div class="form-group last">
          <label>Selection Criteria (if any)</label>
          <textarea id="selectionCriteria" style="min-height: 80px;" placeholder="Leave empty if open for all"></textarea>
        </div>
      </section>

      <!-- Section 3: Proposal -->
      <section class="section-card">
        <h3 class="section-title">Proposal Details</h3>
        <div class="form-group">
          <label>Purpose</label>
          <textarea id="purpose" placeholder="Why is this activity being held?"></textarea>
        </div>
        <div class="form-group">
          <label>Objectives</label>
          <textarea id="objectives" placeholder="What will be achieved?"></textarea>
        </div>
        <div class="form-group last">
          <label>Methodology (Brief)</label>
          <textarea id="methodology" placeholder="How will it be executed?"></textarea>
        </div>
      </section>

      <!-- Section 4: Coordinators -->
      <section class="section-card">
        <h3 class="section-title">Coordinators</h3>
        <p style="font-size:13px; color:var(--muted); margin-top:-10px; margin-bottom:12px;">
          Note: If Role is "Officer", you must select an official email.
        </p>
        <div class="table-responsive">
          <table id="coordTable">
            <thead>
              <tr>
                <th style="width:20%">Name</th>
                <th style="width:25%">Email</th>
                <th style="width:15%">WhatsApp</th>
                <th style="width:15%">Position</th>
                <th style="width:15%">Role</th>
                <th style="width:10%">Action</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <div style="display:flex; gap:10px;">
          <button id="addCoord" type="button" class="btn-ghost action-add">+ Add Coordinator</button>
          <button id="clearCoord" type="button" class="btn-ghost">Clear All</button>
        </div>
      </section>

      <!-- Section 5: Finance -->
      <section class="section-card">
        <h3 class="section-title">Financial Requests and Sponsors</h3>
        
        <div class="table-responsive">
          <table id="financeTable">
            <thead>
              <tr>
                <th>Item</th>
                <th style="width:15%">Price</th>
                <th style="width:10%">Qty</th>
                <th style="width:15%">Total</th>
                <th style="width:10%">Action</th>
              </tr>
            </thead>
            <tbody></tbody>
            <tfoot>
              <tr style="background:#f8fafc; font-weight:700;">
                <td colspan="3" style="text-align:right;">Total Estimated Cost</td>
                <td id="totalCost">0.00</td>
                <td></td>
              </tr>
            </tfoot>
          </table>
        </div>
        <div style="display:flex; gap:10px; margin-bottom:24px;">
          <button id="addFinance" type="button" class="btn-ghost action-add">+ Add Item</button>
          <button id="clearFinance" type="button" class="btn-ghost">Clear</button>
        </div>

        <h4 style="font-size:14px; font-weight:700; color:#475569; margin-bottom:12px;">Sponsorships / Funding</h4>
        <div class="table-responsive">
          <table id="sponsorTable">
            <thead>
              <tr>
                <th>Sponsor Name</th>
                <th style="width:20%">Total Funding</th>
                <th style="width:10%">Action</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <div style="display:flex; gap:10px;">
            <button id="addSponsor" type="button" class="btn-ghost action-add">+ Add Sponsor</button>
            <button id="clearSponsor" type="button" class="btn-ghost">Clear</button>
          </div>
          <div class="required-display">Required: <span id="requiredAmount">0.00</span></div>
        </div>
      </section>

      <!-- Section 6: Requests -->
      <section class="section-card">
        <h3 class="section-title">Internal Requests</h3>
        
        <div class="form-group">
          <label>Documents from Secretary</label>
          <textarea id="docsRequested" placeholder="e.g. Certificates, Absence Excuses..." style="min-height:60px"></textarea>
        </div>

        <hr class="divider">

        <h4 style="font-size:14px; margin-bottom:10px;">Requests for CaPO (Logistics)</h4>
        <div class="toggle-wrap">
          <label class="toggle-label"><input id="reqProjector" type="checkbox"> Projector</label>
          <label class="toggle-label"><input id="reqPrints" type="checkbox"> Prints</label>
          <label class="toggle-label"><input id="reqHall" type="checkbox"> Hall Reservation</label>
        </div>
        <div class="form-group">
          <input id="customCaPO" type="text" placeholder="Custom logistics requests...">
        </div>

        <hr class="divider">

        <h4 style="font-size:14px; margin-bottom:10px;">Requests for CaBO (Branding/Outreach)</h4>
        <div class="toggle-wrap">
          <label class="toggle-label"><input id="reqAnnounce" type="checkbox"> Official Announcement</label>
          <label class="toggle-label"><input id="reqJoint" type="checkbox"> Joint Activity</label>
        </div>
        
        <div class="grid-2">
           <div class="form-group">
              <input id="jointOrgName" type="text" placeholder="If joint, Organization Name">
           </div>
           <div class="form-group">
              <select id="reqDesign">
                <option value="">Need Special Designs?</option>
                <option value="no">No</option>
                <option value="yes">Yes</option>
              </select>
           </div>
        </div>
        <div class="form-group">
          <input id="customCaBO" type="text" placeholder="Custom branding/security requests...">
        </div>
      </section>

      <!-- Section 7: Final Options -->
      <section class="section-card" style="border:1px dashed var(--cardig);">
        <div class="toggle-wrap">
          <label class="toggle-label">
            <input id="useDefaultLogo" type="checkbox" checked> 
            Include Default Logo in PDF
          </label>
        </div>
        <div class="form-group" style="margin-top:12px;">
          <label>Additional Notes (Optional)</label>
          <textarea id="additionalNotes" style="min-height:60px" placeholder="Any extra notes for the board..."></textarea>
        </div>
      </section>

    </main>

    <!-- RIGHT SIDEBAR: Actions & Info -->
    <aside class="sidebar">
      
      <!-- Status Card -->
      <div class="status-card">
        <div class="status-item">
          <div class="status-label">Reference ID</div>
          <div class="status-value" id="topRef">---</div>
        </div>
        <div style="height:1px; background:rgba(255,255,255,0.2); margin:12px 0;"></div>
        <div class="status-item">
          <div class="status-label">Date</div>
          <div class="status-value" id="topDate">---</div>
        </div>
      </div>

      <!-- Main Action -->
      <button id="downloadBtn" type="button" class="btn-primary">
        Download PDF Form
      </button>

      <!-- Export Tools -->
      <div class="section-card" style="padding:16px;">
        <h4 style="font-size:13px; text-transform:uppercase; letter-spacing:1px; color:var(--muted); margin:0 0 12px 0;">Export Cards</h4>
        <div class="export-stack">
          <button id="exportFinance" class="btn-export">Financial Request</button>
          <button id="exportCaBO" class="btn-export">CaBO Request</button>
          <button id="exportCaPO" class="btn-export">CaPO Request</button>
          <button id="exportSec" class="btn-export">Secretary Request</button>
        </div>
      </div>

      <!-- Help / Notes -->
      <div class="help-card">
        <h4 style="margin:0 0 10px 0; font-size:15px; color:var(--cardig);">Policies</h4>
        <div id="notesText" class="text-justify"></div>
        
        <div class="divider" style="margin:16px 0;"></div>
        
        <h4 style="margin:0 0 10px 0; font-size:15px; color:var(--cardig);">Checklist</h4>
        <ul id="checklist" class="checklist-ul"></ul>
        
        <div class="divider" style="margin:16px 0;"></div>
        <div class="footer-note">
          Questions? <br> <a href="mailto:vicepresident@cardig.me" style="color:var(--cardig); text-decoration:none; font-weight:600;">vicepresident@cardig.me</a>
        </div>
      </div>

    </aside>

  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

  <!-- externalized app script (exact JS moved to app.js, no changes) -->
  <script src="app.js"></script>
</body>
</html>
